var test    = require('tape');
var decache = require('decache');
var path    = require('path');
decache('../lib/env.js');    // delete any previously cached version
decache('../../lib/env.js'); // delete alias from require cache
var config  = path.resolve(__dirname + '/../config.env');

// this ensures that the node_modules condition in lib/env.js is met
test("Confirm that EVERYTHING=AWESOME", function(t) {
  delete process.env.EVERYTHING;
  require('../../lib/env.js')(config); // local
  t.ok(process.env.EVERYTHING === 'AWESOME',
  'Worked! Everything is: '+process.env.EVERYTHING)

  decache('../lib/env.js');    // delete any previously cached version
  decache('../../lib/env.js'); // delete alias from require cache
  // decache('config.env');       // uncache config file so we can re-load it!
  t.end();
});
